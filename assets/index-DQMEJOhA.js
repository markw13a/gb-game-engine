import{j as t,r as d,c as M}from"./index-CxvZx6rj.js";import{T as q,a as E}from"./symbols-D7yODOOV.js";const w="_container_1ca6j_1",H={container:w},R="_container_vxoqs_1",W="_header_vxoqs_25",A="_tilesContainer_vxoqs_35",B="_tiles_vxoqs_35",z="_tile_vxoqs_35",F="_controls_vxoqs_93",L="_control_vxoqs_93",Y="_outputContainer_vxoqs_125",h={container:R,header:W,tilesContainer:A,tiles:B,tile:z,controls:F,control:L,outputContainer:Y},I=({children:n,onClick:s})=>t.jsx("button",{type:"button",onClick:s,children:n}),D="_container_1w4cq_1",G="_input_1w4cq_9",T={container:D,input:G},v=({children:n,onChange:s,value:o})=>t.jsxs("label",{className:T.container,children:[n,t.jsx("input",{className:T.input,onChange:s,value:o})]}),J="_container_961rm_1",P="_modal_961rm_29",K="_body_961rm_57",b={container:J,modal:P,body:K},Q=({isOpen:n,children:s})=>n?t.jsx("dialog",{className:b.container,children:t.jsx("div",{className:b.modal,children:t.jsx("div",{className:b.body,children:s})})}):null,U="_container_1fvvk_1",V="_contents_1fvvk_15",X="_footer_1fvvk_27",f={container:U,contents:V,footer:X},Z=({onImport:n,onClose:s,...o})=>{const[u,p]=d.useState(0),[m,r]=d.useState(0),[c,a]=d.useState(""),_=()=>{n(u,m,c),s()};return t.jsx(Q,{...o,children:t.jsxs("div",{className:f.container,children:[t.jsxs("div",{className:f.contents,children:[t.jsx(v,{onChange:i=>p(parseInt(i.target.value,10)),type:"number",value:u,children:"Width (tiles)"}),t.jsx(v,{onChange:i=>r(parseInt(i.target.value,10)),type:"number",value:m,children:"Height (tiles)"}),t.jsx(v,{onChange:i=>a(i.target.value),value:c,children:"Map string"})]}),t.jsxs("div",{className:f.footer,children:[t.jsx(I,{onClick:s,children:"Close"}),t.jsx(I,{onClick:_,children:"Import"})]})]})})},S="-",tt=({width:n,height:s,onWidthChange:o,onHeightChange:u,onOutputChange:p,tileOptions:m,brush:r,mapString:c,onBrushChange:a,getBrushLabel:_,getBrushImgSrc:i,getTileFromSymbol:x})=>{const[j,y]=d.useState(!1),C=(e,l,O)=>{const k=O.split("").map($=>$===S?null:x($));o(e),u(l),p(k)},N=JSON.stringify({dimensions:{width:n,height:s},map:c},null,2);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:h.container,children:[t.jsxs("div",{className:h.tilesContainer,children:[t.jsxs("div",{className:h.header,children:["Selected: ",`
`,r?_(r):"None"]}),t.jsx("div",{className:h.tiles,children:m.map((e,l)=>t.jsx("button",{className:h.tile,"aria-label":`Select ${_(e)} brush`,onClick:()=>a(e),type:"button",children:t.jsx("img",{alt:_(e),src:i(e)})},`${_(e)+l}`))})]}),t.jsxs("div",{className:h.controls,children:[t.jsx(v,{type:"number",onChange:e=>o(parseInt(e.target.value,10)),value:n,children:"Width (tiles)"}),t.jsx(v,{type:"number",onChange:e=>u(parseInt(e.target.value,10)),value:s,children:"Height (tiles)"})]}),t.jsx("div",{className:h.outputContainer,children:t.jsxs("label",{className:h.control,children:["Output",t.jsx("textarea",{readOnly:!0,value:N})]})}),t.jsx("div",{children:t.jsx(I,{onClick:()=>y(!0),children:"Import"})})]}),t.jsx(Z,{isOpen:j,onClose:()=>y(!1),onImport:C})]})},et="_mapContainer_18pzx_1",nt="_map_18pzx_1",st="_tile_18pzx_25",ot="_emptyTile_18pzx_29",g={mapContainer:et,map:nt,tile:st,emptyTile:ot},at=({width:n,height:s,tileSize:o,tiles:u,getTileLabel:p,getTileImgSrc:m,onClickTile:r})=>t.jsx("div",{className:g.mapContainer,children:t.jsx("div",{className:g.map,style:{gridTemplateColumns:`repeat(${n}, ${o})`,gridTemplateRows:`repeat(${s}, ${o})`},children:u.map((c,a)=>c===null?t.jsx("button",{"data-testid":"Empty tile",className:g.emptyTile,style:{width:o,height:o},onClick:()=>r(a),type:"button"},a):t.jsx("button",{"data-testid":`${p(c)} tile`,className:g.tile,style:{width:o,height:o},onClick:()=>r(a),type:"button",children:t.jsx("img",{alt:`${p(c)}`,src:m(c),style:{width:"100%",height:"100%"}})},a))})}),rt=({tileSize:n,tileOptions:s,getTileSymbol:o,getTileLabel:u,getTileImgSrc:p,getTileFromSymbol:m})=>{const[r,c]=d.useState(0),[a,_]=d.useState(0),[i,x]=d.useState([]),[j,y]=d.useState(),C=e=>{if(!j)return;const l=[...i];l[e]=j,x(l)};d.useEffect(()=>{const e=r*a;if(e===0||Number.isNaN(e))return;const l=new Array(r*a).fill(null);x(l)},[r,a]);const N=i.reduce((e,l)=>l===null?S:e+o(l),"");return t.jsxs("div",{className:H.container,children:[t.jsx(at,{width:r,height:a,tileSize:n,tiles:i,getTileLabel:u,getTileImgSrc:p,onClickTile:e=>C(e)}),t.jsx(tt,{width:r,height:a,onWidthChange:c,onHeightChange:_,onOutputChange:x,tileOptions:s,brush:j,mapString:N,onBrushChange:y,getBrushLabel:e=>e?u(e):"",getBrushImgSrc:e=>e?p(e):"",getTileFromSymbol:m})]})},ct=()=>t.jsx(rt,{tileOptions:E,tileSize:"32px",getTileSymbol:n=>n.type,getTileFromSymbol:n=>q[n],getTileLabel:n=>n.label,getTileImgSrc:n=>n.sprite}),ut=M("/")({component:ct});export{ut as Route};
